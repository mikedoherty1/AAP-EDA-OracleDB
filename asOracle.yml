---
- hosts: all
  vars:
    ansible_python_interpreter: auto_silent

  tasks:
    - name: Untar Oracle Binaries
      ansible.builtin.shell:
        cmd: tar -xzvf ora19c.tar.gz
        chdir: /oracle
      register: shell
    - debug: var=shell.stdout_lines
    - name: Set correct hostname in listener.ora
      ansible.builtin.shell:
        cmd: sed -i 's/oel78.local/"{{ vbvm }}"/g' listener.ora
        chdir: /oracle/app/product/19c/network/admin
      register: shell
    - debug: var=shell.stdout_lines
    - name: Set correct hostname in tnsnames.ora
      ansible.builtin.shell:
        cmd: sed -i 's/oel78.local/"{{ vbvm }}"/g' tnsnames.ora
        chdir: /oracle/app/product/19c/network/admin
      register: shell
    - debug: var=shell.stdout_lines
    - name: Start listener
      ansible.builtin.shell:
        cmd: /oracle/app/product/19c/bin/lsnrctl start
      register: shell
    - debug: var=shell.stdout_lines
